*** Settings ***
Resource           environment.txt

*** Variables ***
${Contact_URL}     ${PENNYMAIL_URL}/contact


*** Keywords ***

Add Recipients Workflow
	[Arguments]        ${recipients}
	Add Recipients     ${recipients}
	All Recipients Should Be Added Into List Without Errors

Add Recipients
    [Arguments]           ${recipients}
	Go to                 ${Contact_URL}
	Fill in Recipients    ${recipients}
	Click Button          add
	
All Recipients Should Be Added Into List Without Errors
    Page Should No Error Message
    ${recipient_list} =    Split String    ${recipients}    ,
    ${length} =    Get Length    ${recipient_list}
    : FOR    ${i}    IN RANGE    0    ${length}
	\    Recipients List Should Contain New Recipient      ${recipient_list[${i}]}

Open Add Contact Browser
	Open Browser                  ${Contact_URL} 
    Wait Until Page Contains      Recipients
    
Fill in Recipients
	[Arguments]     ${recipients}
    Input Text      addRecipients      ${recipients}
    
Recipients List Should Contain New Recipient
	[Arguments]                     ${recipient}
    Element Should Contain          currentRecipientsList              ${recipient}      

Page Should No Error Message
    Page Should Not Contain         แสรดด e Penny โง่
    